<!doctype html>
<html lang="{{ page.lang }}" class="scroll-smooth">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    {% include head.html %}
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        darkMode: "class",
        theme: {
          extend: {
            colors: {
              primary: "#3b82f6",
            },
            fontFamily: {
              sans: ["Inter", "sans-serif"], // „Çà„Çä„É¢„ÉÄ„É≥„Å™„Éï„Ç©„É≥„ÉàÊåáÂÆö„Åå„ÅÇ„Çå„Å∞
            },
          },
        },
      };
    </script>
    <style>
      /* „Çπ„ÇØ„É≠„Éº„É´„Éê„ÉºÈùûË°®Á§∫ */
      .no-scrollbar::-webkit-scrollbar {
        display: none;
      }
      .no-scrollbar {
        -ms-overflow-style: none;
        scrollbar-width: none;
      }

      /* „Éï„Ç£„É´„Çø„Éº„Éú„Çø„É≥„ÅÆ„Ç¢„ÇØ„ÉÜ„Ç£„Éñ„Çπ„Çø„Ç§„É´ */
      .filter-btn.active {
        background-color: #374151; /* dark-gray-700 */
        color: white;
      }
      .dark .filter-btn.active {
        background-color: #e5e7eb; /* gray-200 */
        color: black;
      }
    </style>
  </head>
  <body
    class="bg-white text-gray-900 antialiased transition-colors duration-300 dark:bg-black dark:text-white"
  >
    <!-- „Éò„ÉÉ„ÉÄ„Éº„Ç®„É™„Ç¢ -->
    <header
      class="sticky top-0 z-50 bg-white/95 px-5 py-8 backdrop-blur-sm transition-colors duration-300 dark:bg-black/95"
    >
      <div class="container mx-auto max-w-2xl">
        <!-- ‰∏äÊÆµ: „Çø„Ç§„Éà„É´„Å®„Ç≥„É≥„Éà„É≠„Éº„É´ -->
        <div class="mb-10 flex items-start justify-between">
          <!-- „Çø„Ç§„Éà„É´ (Â∑¶ÂØÑ„Åõ„Éª„Çπ„Çø„ÉÉ„ÇØ) -->
          <a href="{{ site.baseurl }}/" class="group block">
            <h2
              class="text-[2.5rem] font-bold leading-[1.1] tracking-tight text-gray-900 transition-opacity group-hover:opacity-80 dark:text-white"
            >
              Daisuke<br />Miyazaki's<br />Blog
            </h2>
          </a>

          <!-- Âè≥ÂÅ¥„Ç≥„É≥„Éà„É≠„Éº„É´Áæ§ -->
          <div class="flex items-center gap-6 pt-2">
            <!-- Ë®ÄË™ûÂàá„ÇäÊõø„Åà („Éà„Ç∞„É´„Çπ„Ç§„ÉÉ„ÉÅÈ¢®) -->
            <div class="flex flex-col items-center gap-1.5">
              {% if page.lang == 'jp' %}
              <a
                href="/en/"
                class="relative flex h-8 w-14 items-center rounded-full bg-[#8e8e93] p-1 transition-colors hover:opacity-90"
                aria-label="Switch to English"
              >
                <!-- ÁôΩ‰∏∏ („Éà„Ç∞„É´) -->
                <div
                  class="flex h-6 w-6 translate-x-6 items-center justify-center rounded-full bg-white shadow-sm transition-transform duration-300"
                >
                  <!-- Êó•Êú¨ÂõΩÊóóÈ¢®„ÅÆËµ§‰∏∏ (Á∞°ÊòìË°®Áèæ) -->
                  <div class="h-2.5 w-2.5 rounded-full bg-red-500"></div>
                </div>
                <!-- ËÉåÊôØ„ÅÆÂõΩÊóó/ÊñáÂ≠ó (ÁîªÂÉèÂÜçÁèæ„ÅØCSS„ÅßÁ∞°Êòì„Å´) -->
                <span
                  class="absolute left-2 text-[10px] font-bold text-white/90"
                  >üá¶üá∫</span
                >
              </a>
              {% else %}
              <a
                href="/"
                class="relative flex h-8 w-14 items-center rounded-full bg-[#8e8e93] p-1 transition-colors hover:opacity-90"
                aria-label="Switch to Japanese"
              >
                <!-- ÁôΩ‰∏∏ („Éà„Ç∞„É´) -->
                <div
                  class="flex h-6 w-6 translate-x-0 items-center justify-center rounded-full bg-white shadow-sm transition-transform duration-300"
                >
                  <div class="h-2.5 w-2.5 rounded-full bg-blue-800"></div>
                </div>
                <span
                  class="absolute right-2 text-[10px] font-bold text-white/90"
                  >üáØüáµ</span
                >
              </a>
              {% endif %}
              <span class="text-xs font-medium text-gray-500 dark:text-gray-400"
                >EN/JP</span
              >
            </div>

            <!-- Recipes -->
            <a href="/recipes" class="group flex flex-col items-center gap-1.5">
              <div
                class="flex h-8 w-8 items-center justify-center text-2xl text-[#8e8e93] transition-colors group-hover:text-gray-600 dark:text-gray-400 dark:group-hover:text-white"
              >
                <!-- „Éï„Ç©„Éº„ÇØ„Å®„Éä„Ç§„Éï„ÅÆ„Ç¢„Ç§„Ç≥„É≥ (ÊñáÂ≠ó„Åß‰ª£Áî®„ÄÅ„ÅÇ„Çã„ÅÑ„ÅØSVG) -->
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="currentColor"
                  class="h-7 w-7"
                >
                  <path
                    d="M11 9H9V2H7v7H5V2H3v7c0 2.12 1.66 3.84 3.75 3.97V22h2.5v-9.03C11.34 12.84 13 11.12 13 9V2h-2v7zm5-3v8h2.5v8H21V2c-2.76 0-5 2.24-5 4z"
                  />
                </svg>
              </div>
              <span class="text-xs font-medium text-gray-900 dark:text-gray-300"
                >Recipes</span
              >
            </a>

            <!-- Night Mode -->
            <button
              id="theme-toggle"
              class="group flex flex-col items-center gap-1.5 focus:outline-none"
            >
              <div
                class="flex h-8 w-8 items-center justify-center text-2xl text-[#8e8e93] transition-colors group-hover:text-gray-600 dark:text-gray-400 dark:group-hover:text-white"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="currentColor"
                  class="hidden h-6 w-6 dark:block"
                >
                  <path
                    d="M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm0 9c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"
                  />
                </svg>
                <!-- Êúà„Ç¢„Ç§„Ç≥„É≥ (Solid) -->
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="currentColor"
                  class="h-6 w-6 dark:hidden"
                >
                  <path
                    d="M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9c0-.46-.04-.92-.1-1.36-.98 1.37-2.58 2.26-4.4 2.26-2.98 0-5.4-2.42-5.4-5.4 0-1.81.89-3.42 2.26-4.4-.44-.06-.9-.1-1.36-.1z"
                  />
                </svg>
              </div>
              <span
                class="text-center text-xs font-medium leading-tight text-gray-900 dark:text-gray-300"
              >
                Night<br />Mode
              </span>
            </button>
          </div>
        </div>

        <!-- ‰∏ãÊÆµ: „Ç´„ÉÜ„Ç¥„É™„Éï„Ç£„É´„Çø„Éº („Éî„É´Âûã„ÉªÊ®™„Çπ„ÇØ„É≠„Éº„É´) -->
        <div class="no-scrollbar flex gap-2 overflow-x-auto pb-1">
          <button
            class="filter-btn active whitespace-nowrap rounded-full bg-gray-100 px-5 py-2 text-sm font-bold text-gray-500 transition-colors hover:bg-gray-200 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-gray-700"
            data-genre="all"
          >
            {% if page.lang == 'jp' %}„Åô„Åπ„Å¶{% else %}All{% endif %}
          </button>
          {% if page.lang == 'jp' %}
          <button
            class="filter-btn whitespace-nowrap rounded-full bg-gray-100 px-5 py-2 text-sm font-bold text-gray-500 transition-colors hover:bg-gray-200 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-gray-700"
            data-genre="ÂÆüÁî®"
          >
            ÂÆüÁî®
          </button>
          <button
            class="filter-btn whitespace-nowrap rounded-full bg-gray-100 px-5 py-2 text-sm font-bold text-gray-500 transition-colors hover:bg-gray-200 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-gray-700"
            data-genre="Áü≠Á∑®Â∞èË™¨"
          >
            Áü≠Á∑®Â∞èË™¨
          </button>
          <button
            class="filter-btn whitespace-nowrap rounded-full bg-gray-100 px-5 py-2 text-sm font-bold text-gray-500 transition-colors hover:bg-gray-200 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-gray-700"
            data-genre="„Ç®„ÉÉ„Çª„Ç§"
          >
            „Ç®„ÉÉ„Çª„Ç§
          </button>
          <button
            class="filter-btn whitespace-nowrap rounded-full bg-gray-100 px-5 py-2 text-sm font-bold text-gray-500 transition-colors hover:bg-gray-200 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-gray-700"
            data-genre="work"
          >
            work
          </button>
          {% else %}
          <button
            class="filter-btn whitespace-nowrap rounded-full bg-gray-100 px-5 py-2 text-sm font-bold text-gray-500 transition-colors hover:bg-gray-200 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-gray-700"
            data-genre="practical"
          >
            practical
          </button>
          <button
            class="filter-btn whitespace-nowrap rounded-full bg-gray-100 px-5 py-2 text-sm font-bold text-gray-500 transition-colors hover:bg-gray-200 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-gray-700"
            data-genre="short-story"
          >
            short-story
          </button>
          {% endif %}
        </div>
      </div>
    </header>

    <!-- „É°„Ç§„É≥„Ç≥„É≥„ÉÜ„É≥„ÉÑ: „Ç∑„É≥„Éó„É´„Å™„É™„Çπ„ÉàË°®Á§∫ -->
    <main class="container mx-auto min-h-screen max-w-2xl px-5 pb-24">
      <div class="flex flex-col gap-12" id="gallery-grid">
        {% assign posts = site.posts | where:"lang", page.lang %} {% for post in
        posts %}
        <a
          href="{{ post.url }}"
          class="gallery-item group block cursor-pointer"
          data-genre="{{ post.genre }}"
          data-date="{{ post.date | date_to_xmlschema }}"
        >
          <!-- Êó•‰ªò„Å®„Ç∏„É£„É≥„É´„Çø„Ç∞ -->
          <div
            class="mb-2 flex items-center text-base text-gray-400 dark:text-gray-500"
          >
            <time>{{ post.date | date: "%d %b %Y" }}</time>
            <span class="mx-2 font-medium text-blue-400 dark:text-blue-500"
              >#{{ post.genre }}</span
            >
          </div>

          <!-- „Çø„Ç§„Éà„É´ -->
          <h2
            class="mb-3 text-2xl font-bold leading-snug text-gray-900 transition-colors group-hover:text-blue-600 dark:text-gray-50 dark:group-hover:text-blue-400"
          >
            {{ post.title }}
          </h2>

          <!-- ÊäúÁ≤ã -->
          <p
            class="line-clamp-3 text-base leading-relaxed text-gray-600 dark:text-gray-400"
          >
            {{ post.excerpt | strip_html }}
          </p>
        </a>
        {% endfor %} {% for work in site.data.works %}
        <a
          href="{{ work.jp.site_link }}"
          class="gallery-item group block cursor-pointer"
          data-genre="work"
          data-date="{{ work.jp.start_at | date: '%Y-%m-%d' }}"
          target="_blank"
        >
          <div
            class="mb-2 flex items-center text-base text-gray-400 dark:text-gray-500"
          >
            <time
              >{{ work.jp.start_at | date: "%Y" }} - {{ work.jp.end_at | date:
              "%Y" }}</time
            >
            <span class="mx-2 font-medium text-blue-400 dark:text-blue-500"
              >#work</span
            >
          </div>
          <h2
            class="mb-3 text-2xl font-bold leading-snug text-gray-900 transition-colors group-hover:text-blue-600 dark:text-gray-50 dark:group-hover:text-blue-400"
          >
            {{ work.jp.title }}
          </h2>
          <p
            class="line-clamp-3 text-base leading-relaxed text-gray-600 dark:text-gray-400"
          >
            {{ work.jp.short }}
          </p>
        </a>
        {% endfor %}
      </div>
    </main>

    <script>
      // Êó¢Â≠ò„ÅÆJS„É≠„Ç∏„ÉÉ„ÇØ (Â§âÊõ¥„Å™„Åó)
      document.addEventListener("DOMContentLoaded", function () {
        const filterButtons = document.querySelectorAll(".filter-btn");
        const galleryItems = Array.from(
          document.querySelectorAll(".gallery-item"),
        );
        const galleryGrid = document.getElementById("gallery-grid");
        const themeToggleBtn = document.getElementById("theme-toggle");

        // Êó•‰ªòÈ†Ü„ÇΩ„Éº„Éà
        galleryItems.sort(
          (a, b) => new Date(b.dataset.date) - new Date(a.dataset.date),
        );
        galleryGrid.innerHTML = "";
        galleryItems.forEach((item) => galleryGrid.appendChild(item));

        // „Éï„Ç£„É´„Çø„Éº
        filterButtons.forEach((button) => {
          button.addEventListener("click", function () {
            filterButtons.forEach((btn) => btn.classList.remove("active"));
            this.classList.add("active");
            const genre = this.dataset.genre;
            galleryItems.forEach((item) => {
              if (genre === "all" || item.dataset.genre === genre) {
                item.style.display = "block";
              } else {
                item.style.display = "none";
              }
            });
          });
        });

        // „ÉÄ„Éº„ÇØ„É¢„Éº„Éâ
        if (
          localStorage.getItem("theme") === "dark" ||
          (!("theme" in localStorage) &&
            window.matchMedia("(prefers-color-scheme: dark)").matches)
        ) {
          document.documentElement.classList.add("dark");
        } else {
          document.documentElement.classList.remove("dark");
        }
        themeToggleBtn.addEventListener("click", function () {
          if (document.documentElement.classList.contains("dark")) {
            document.documentElement.classList.remove("dark");
            localStorage.setItem("theme", "light");
          } else {
            document.documentElement.classList.add("dark");
            localStorage.setItem("theme", "dark");
          }
        });
      });
    </script>
  </body>
</html>
